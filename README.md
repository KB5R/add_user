# Генератор записей пользователей из `user.txt`

Скрипт читает файл `user.txt`, транслитерирует имена/фамилии с кириллицы в латиницу и формирует строки формата:

```
Фамилия:Имя:логин:Должность:Email
```

Результат сохраняется построчно в `full_users.txt`.

## Требования

- Python 3.7+
- Кодировка входного файла: UTF-8

## Файлы по умолчанию

- Вход: `user.txt`
- Выход: `full_users.txt` (дозапись, режим `a`)

Пути и имена можно изменить, отредактировав константы в начале скрипта:

```python
FILE_INPUT = 'user.txt'
FILE_OUTPUT = 'full_users.txt'
```

## Формат входных данных (`user.txt`)

Каждая строка — один пользователь, **пять полей через пробел**:

1. **Имя** (обязательно)
2. **Фамилия** (обязательно)
3. **Отчество/доп.поле** (не используется, можно оставить пустым или служебным)
4. **Email** (обязательно)
5. **Должность** (опционально; если отсутствует — в выходе будет пустое поле)

> Важно: поле «Должность» принимается **только одним словом** (без пробелов), иначе всё после пятого токена игнорируется. Если нужно несколько слов — используйте подчёркивания (`Старший_системный_администратор`) или заранее объединяйте поле.

### Минимальные требования по длине строки

- Без должности: минимум **4** токена (Имя, Фамилия, что-то на месте 3-его, Email)
- С должностью: минимум **5** токенов

## Формат выходных данных (`full_users.txt`)

```
Фамилия_транслит:Имя_транслит:фамилия.имя (нижний регистр, транслит):Должность:Email
```

- Логин формируется как `lastname.firstname` (оба в нижнем регистре и после транслитерации).
- Если должность не указана — между двумя двоеточиями будет пусто: `...::email@...`

## Примеры

### Пример 1 — с должностью

**`user.txt` (строка):**
```
Иван Иванов Иванович i.ivanov@example.com Системный_администратор
```

**`full_users.txt` (результат):**
```
Ivanov:Ivan:ivanov.ivan:Системный_администратор:i.ivanov@example.com
```

### Пример 2 — без должности

**`user.txt` (строка):**
```
Мария Петрова Сергеевна m.petrova@example.com
```

**`full_users.txt` (результат):**
```
Petrova:Mariya:petrova.mariya::m.petrova@example.com
```

### Пример 3 — фамилия/имя с кириллицей, символы очищаются

**`user.txt` (строка):**
```
Алексей Сидоров-Павленко Олегович a.sp@example.com DevOps
```

**`full_users.txt` (результат):**
```
SidorovPavlenko:Aleksey:sidorovpavlenko.aleksey:DevOps:a.sp@example.com
```

> Примечание: дефис `-` удаляется согласно словарю очистки.

### Пример 4 — украинские буквы и знаки

**`user.txt` (строка):**
```
Юрій Ґринько Тарасович y.grynko@example.com Team_Lead
```

**`full_users.txt` (результат):**
```
Grynyko:Yuriy:grynyko.yuriy:Team_Lead:y.grynko@example.com
```

> Буквы `ґ/Ґ`, `ї/Ї`, `є/Є` обрабатываются по словарю: `ґ/Ґ→g`, `ї/Ї→i`, `є/Є→e`. Длинное тире/служебные символы удаляются.

## Запуск

В каталоге со скриптом и `user.txt`:

```bash
python3 script.py
```

После запуска в `full_users.txt` добавятся новые строки (дозапись). Если нужен «чистый» файл — удалите или очистите `full_users.txt` перед запуском.

## Логика транслитерации и очистки

- Транслитерация выполняется функцией `transliterate()` по встроенному словарю.
- Регистр букв сохраняется (например, `Ч` → `Ch`, `Ж` → `ZH`).
- Большинство знаков препинания и служебных символов удаляются: `, ? ~ ! @ # $ % ^ & * ( ) - = + : ; < > ' " \ / № [ ] { } —`
- Пробелы сохраняются, но в логине их нет (логин собирается из фамилии и имени без пробелов).

## Ограничения и особенности

- **Пробелы в должности**: берётся **только одно слово** (пятый токен). Используйте подчёркивания или модифицируйте парсер (см. ниже).
- **Среднее поле (третий токен)** не используется; скрипт просто «перешагивает» его.
- **Дозапись** в `full_users.txt`: повторный запуск добавит дубликаты, если вход не меняется.
- **Очистка символов** может склеить сложные фамилии (дефисы удаляются). Если дефис нужно сохранить как точку или нижнее подчёркивание — адаптируйте словарь.

## Совет по улучшению парсинга должности (опционально)

Если должность может состоять из нескольких слов, можно заменить строку:

```python
title_name = split[4] if len(split) >= 5 else ""
```

на:

```python
title_name = " ".join(split[4:]) if len(split) >= 5 else ""
```

Тогда всё, что после email, будет считано как должность целиком.
